---
title: vim 录制命令
date: 2018-10-30 22:42:40
tags:
- 工具
- vim
---

在编辑某个文件的时候，可能会出现需要对某种特定的操作进行许多次的情况，这时候就需要宏。所谓宏，在vim里面是指某种特定顺序的一系列操作，我们可以录制自己的操作序列，然后重复这个序列多次，以简化某种重复的操作。vim宏有录制和播放的过程，录制就是你教给vim该怎么操作，播放就是vim照着你教的进行自动操作。

下面介绍一下宏的录制和播放方法。

<!--more-->

## 录制

- 在正常模式下（非insert模式、非visual模式）按下q键盘
- 选择a-z或0-9中任意一个作为缓冲器的名字，准备开始录制宏
- 正常的操作，此次所有的操作都会被记录在上一步中定义的缓冲器中
- 在非insert模式下输入q停止宏的录制

例：qa -> dd -> q

就录制了删除一行的宏。

## 播放

使用 @ 加上定义的缓冲器的名字即可，可在前面加数字来多次执行

例：

`qa`

`100@a`

就删除了100行。


## 其他

- 可以和查询组合起来使用。例如想把一个文件中含有特定字符串的行注释，可以通过这样的宏来实现。在正常模式下输入qa -> /search\_string, enter, shift + ^, i, #, esc -> q
- 存放宏的缓冲器对于整个 vim 是全局变量。也就是说，在一个文件中录制的宏可以在编辑另一个文件时使用。
